<!DOCTYPE html>
<!--Elevation getter 0.1
	March 24, 2025
-->

<html lang="en">
	<head>
		<style>
			body {
			  font-size: 0.75 rem;
			}

		</style>
	</head>
	<title>Elevation Finder 0.1</title>
	<body font-size:0.5rem>
			Enter a comma-separated latitude and longitude in decimal degrees (e.g., pasted coordinates from Google Maps): <br>
			<input type="text" id="latlongstring" size="50" step="any" placeholder="e.g., 49.5, -120.5" oninput="getElevationData()"><br><br>

		<div id="elevationData"></div>
		<br/>
		<div id="elevationURL"></div>
		<br/>
		<div id="citation"></div>

		<script>
			function getElevationData() {
			
				const latlong = document.getElementById("latlongstring").value.split(",");			
				const lat = latlong[0].trim();
				const lon = latlong[1].trim();
				
				// Build the URL with the latitude and longitude from the inputs
				const url = `https://geogratis.gc.ca/services/elevation/cdem/altitude?lat=${lat}&lon=${lon}`;
				
				const date = new Date();
				
				const currentyear = date.getFullYear();
				const currentmonth = date.toLocaleString('default', { month: 'long' });
				
				
				// Fetch data from the API
				fetch(url)
					.then(response => response.json())  // Parse the JSON response
					.then(data => {
						// Check if the response contains the expected 'altitude' field
						if (data && data.altitude) {
							// Display the parsed altitude data
							document.getElementById("elevationData").innerHTML = `
								<strong>Elevation: ${data.altitude} meters</strong>
							`;
							document.getElementById("elevationURL").innerHTML = `Link for data QA/QC: <a href=${url}>${url}</a>`;
							document.getElementById("citation").innerHTML = `Suggested citation: Natural Resources Canada (NRC). ${currentyear}. Canadian Digital Elevation Model (via Elevation API). Available at: <a href="https://natural-resources.canada.ca/science-data/data-analysis/geospatial-data-portals-tools-services/elevation-api">https://natural-resources.canada.ca/science-data/data-analysis/geospatial-data-portals-tools-services/elevation-api</a>. Accessed ${currentmonth} ${currentyear}.`;
						} else {
							document.getElementById("elevationData").innerHTML = "No elevation data available.";
						}
					})
					.catch(error => {
						console.error("Error fetching data:", error);
						document.getElementById("elevationData").innerHTML = "Error fetching data.";
					});
			}
		</script>
	</body>
</html>
